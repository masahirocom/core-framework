# CORE設計フレームワーク - 具体例と使い方ガイド

## CORE設計フレームワークとは？

シンプルで実践的な4つの視点で、システム設計の質を高めるためのフレームワークです。

------

## 🌟 各視点での質問例と具体的回答例

### C: Context（文脈・目的） 🎯

| 質問                                     | 悪い回答例         | 良い回答例                                                   |
| ---------------------------------------- | ------------------ | ------------------------------------------------------------ |
| このシステムは具体的に誰が使いますか？   | 「社内ユーザー」   | 「営業部門（20名）と経理部門（5名）。営業は外出先からもアクセスし、経理は月末に集中利用」 |
| ユーザーはこれで何を達成したいですか？   | 「業務効率化」     | 「営業は顧客訪問時に在庫確認と納期回答を即座に行いたい。経理は月末の請求書発行を現在の2日から半日に短縮したい」 |
| このシステムの最も重要な目標は何ですか？ | 「使いやすいこと」 | 「モバイル環境での応答速度を2秒以内にし、営業の現場対応力を向上させること」 |

**C視点でのポイント**：

- ユーザーを具体的な役割・人数・使用状況で特定する
- 達成したい目標を具体的な数値や変化で表現する
- 優先順位を明確にし、トレードオフの判断基準を持つ

------

### O: Object（責任・構造） 🧩

| 質問                                             | 悪い回答例                       | 良い回答例                                                   |
| ------------------------------------------------ | -------------------------------- | ------------------------------------------------------------ |
| このシステムはどんな主要部分に分かれていますか？ | 「フロントエンドとバックエンド」 | 「①ユーザーインターフェース ②販売管理ロジック ③在庫管理ロジック ④顧客データ管理 ⑤外部システム連携」 |
| 各部分は何をする責任がありますか？               | 「データを処理する」             | 「在庫管理ロジックは『在庫数の確認』『引当処理』『発注点管理』の3つに責任を持ち、販売管理とは在庫確認APIで連携する」 |
| 一箇所を変更すると他のどこに影響しますか？       | 「影響は最小限」                 | 「顧客データのスキーマ変更は、UIの顧客検索画面と販売管理ロジックの与信チェック機能に影響する」 |

**O視点でのポイント**：

- 機能的なまとまりで分割し、具体的な名前をつける
- 各部分の責任範囲を「何をする/何をしない」で明確に
- 変更の影響範囲を具体的に予測できるようにする

------

### R: Reaction（状態・変化） 🔁

| 質問                                           | 悪い回答例             | 良い回答例                                                   |
| ---------------------------------------------- | ---------------------- | ------------------------------------------------------------ |
| システムにはどんな状態がありますか？           | 「正常と異常」         | 「受注データは『確認中』『発送準備中』『発送済』『キャンセル』の4状態があり、各状態で編集可能項目が異なる」 |
| 主な操作をすると何が変わりますか？             | 「データが更新される」 | 「発注確定操作を行うと、①受注テーブルのステータスが変わる ②在庫引当が行われる ③顧客の購入履歴が更新される ④（設定によっては）発送システムに連携される」 |
| この動作が正しいか、どうやって確認できますか？ | 「テストする」         | 「①単体テストで各ステータス遷移の整合性検証 ②結合テストで在庫数の変化を確認 ③E2Eテストで画面からの操作で正しく処理されるか確認 ④ログにトランザクションIDを出力し追跡可能にする」 |

**R視点でのポイント**：

- 状態を名前付きで列挙し、遷移条件を明確にする
- 一連の操作による変化を連鎖的に追跡できるようにする
- 動作確認の方法を複数レベルで具体化する

------

### E: Evolution（拡張と共有） 🔄

| 質問                                           | 悪い回答例                     | 良い回答例                                                   |
| ---------------------------------------------- | ------------------------------ | ------------------------------------------------------------ |
| 将来的に追加される可能性がある機能は何ですか？ | 「必要に応じて対応」           | 「今後6ヶ月以内に①複数倉庫対応 ②外貨対応 ③モバイルアプリ化が予定されており、これらに対応するため在庫管理は拠点IDを考慮した設計にし、金額計算ロジックは通貨情報を拡張できる構造にする」 |
| この設計は同僚に5分で説明できますか？          | 「ドキュメントを読めば分かる」 | 「①システム全体図 ②主要5画面のモックアップ ③状態遷移図 ④主要データの関連図を1枚のボードに整理しており、これを使えば5分で概要説明できる」 |
| 何か壊れたとき、どう調査・修正しますか？       | 「ログを確認する」             | 「すべてのトランザクションにIDを付与しトレース可能にしている。また、主要なエラーパターンごとに対応フローを定義し、オンコール担当者がすぐに対応できるようにしている」 |

**E視点でのポイント**：

- 将来の変更を具体的に予測し、その対応方針を持つ
- 設計内容を視覚的に簡潔に表現できるようにする
- 運用・保守の観点を設計初期から組み込む

------

## 💡 CORE設計チェックリストの効果的な使い方

### 1. タイミングと場面

- **企画・要件定義時**: 主にC視点を深掘り
- **基本設計時**: CとOを重点的に
- **詳細設計時**: O、R、Eをバランスよく
- **レビュー時**: 全視点を網羅的に

### 2. 視点ごとの時間配分目安（1時間のレビュー会の場合）

- C: Context - 10分
- O: Object - 20分
- R: Reaction - 20分
- E: Evolution - 10分

### 3. 会議での活用ヒント

- 質問を1つずつホワイトボードに書き出す
- 回答に具体性がない場合は「それはどういう意味ですか？」と深掘りする
- 各視点の終わりに「他に考慮すべき点はありますか？」と確認する
- 優先度の高い懸念点をすぐにアクションアイテム化する

### 4. 1人での使用時のコツ

- 各質問に対する回答を実際に書き出してみる（頭の中だけで考えない）
- 「もし同僚がこの質問をしてきたら？」と想像して答える
- 不明点・不安点を正直にリストアップする
- 完璧を目指さず、次のステップで解決すべき点を明確にする

------

## 📊 ケーススタディ: 受注管理システムのCOREチェック例

**プロジェクト**: 社内受注管理システムリニューアル

### C: Context

- **ユーザー**: 営業部門20名（社外からアクセス）、経理部門5名（社内のみ）
- **主目的**: 受注処理時間を50%短縮、モバイル対応で現場での顧客対応力向上
- **制約**: 6ヶ月以内に稼働、既存DBスキーマの継続利用、月間5000件の受注処理

### O: Object

- 主要コンポーネント

  :

  1. ユーザーインターフェース（Web/モバイル対応）
  2. 受注管理コア（受注CRUD、ステータス管理）
  3. 在庫連携（在庫確認、引当処理）
  4. 顧客管理連携（顧客情報参照、与信チェック）
  5. 帳票出力（PDF生成、メール送信）

### R: Reaction

- **主要状態**: 「見積」→「受注確定」→「在庫引当」→「出荷指示」→「売上確定」
- **重要処理**: 受注確定時は、在庫引当・与信チェック・承認ワークフローが連動
- **テスト方針**: ステータス遷移ごとの単体テスト、全体フローのE2Eテスト

### E: Evolution

- **将来拡張**: 海外拠点対応、モバイルアプリ化、AIによる受注予測
- **運用考慮**: すべての操作履歴を記録、障害時の調査用トレースID導入
- **説明資料**: システム概要図、画面遷移図、データモデル図を整備

------

> CORE設計フレームワーク
> - 作者: 中津川 昌弘（Masahiro Nakatsugawa）
